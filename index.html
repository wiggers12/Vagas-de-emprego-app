<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>App Jiu-Jitsu</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #fff;
      color: #000;
    }
    header {
      background: #000;
      color: #FFD700; /* amarelo ouro */
      padding: 15px;
      text-align: center;
    }
    nav {
      display: flex;
      justify-content: space-around;
      background: #FFD700;
    }
    nav button {
      background: transparent;
      border: none;
      padding: 14px;
      font-weight: bold;
      cursor: pointer;
      color: #000;
    }
    nav button.active {
      border-bottom: 3px solid #000;
    }
    section {
      display: none;
      padding: 20px;
    }
    section.active {
      display: block;
    }
    input, select, textarea {
      display: block;
      width: 95%;
      padding: 8px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .btn {
      background: #000;
      color: #FFD700;
      padding: 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }
    .card {
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 5px;
      margin: 10px 0;
      background: #f9f9f9;
    }
  </style>
</head>
<body>
  <header>
    <h1>Jornada do Jiu-Jitsu</h1>
  </header>

  <nav>
    <button class="active" onclick="showTab('home')">Home</button>
    <button onclick="showTab('cadastro')">Cadastro</button>
    <button onclick="showTab('dieta')">Dieta</button>
  </nav>

  <!-- HOME -->
  <section id="home" class="active">
    <h2>Bem-vindo</h2>
    <p>Acompanhe sua evolução no Jiu-Jitsu com cadastro, histórico e dieta personalizada.</p>
  </section>

  <!-- CADASTRO DO ATLETA -->
  <section id="cadastro">
    <h2>Cadastro do Atleta</h2>
    <form id="formAtleta">
      <input type="text" id="nome" placeholder="Nome" required>
      <input type="text" id="sobrenome" placeholder="Sobrenome" required>
      <input type="number" id="idade" placeholder="Idade" required>
      <select id="graduacao" required>
        <option value="">Selecione a Graduação</option>
        <option>Branca</option>
        <option>Azul</option>
        <option>Roxa</option>
        <option>Marrom</option>
        <option>Preta</option>
      </select>
      <input type="text" id="tempo" placeholder="Tempo de treino (anos)">
      <h3>Histórico de Campeonatos</h3>
      <input type="number" id="lutou" placeholder="Quantos já lutou">
      <input type="number" id="ganhou" placeholder="Quantos ganhou">
      <input type="number" id="perdeu" placeholder="Quantos perdeu">
      <button type="submit" class="btn">Salvar Atleta</button>
    </form>
    <div id="listaAtletas"></div>
  </section>

  <!-- DIETA -->
  <section id="dieta">
    <h2>Dieta e Agenda Alimentar</h2>
    <form id="formDieta">
      <input type="text" id="refeicao" placeholder="Descrição da refeição" required>
      <input type="time" id="hora" required>
      <button type="submit" class="btn">Adicionar Refeição</button>
    </form>
    <div id="listaDieta"></div>
  </section>

  <!-- Firebase -->
  <script type="module">
    // Import Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-analytics.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyC1WaaBD9XXRoMGgiKRU_qTLcQ5CdNHQKs",
      authDomain: "vagas-de-emprego-app.firebaseapp.com",
      projectId: "vagas-de-emprego-app",
      storageBucket: "vagas-de-emprego-app.firebasestorage.app",
      messagingSenderId: "301719945007",
      appId: "1:301719945007:web:e2b5141d1fc941bd11ebda",
      measurementId: "G-JRJBBRWG2R"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getFirestore(app);

    // Função para trocar abas
    window.showTab = function(tab) {
      document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
      document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
      document.getElementById(tab).classList.add("active");
      event.target.classList.add("active");
    };

    // Cadastro do Atleta
    const formAtleta = document.getElementById("formAtleta");
    const listaAtletas = document.getElementById("listaAtletas");
    formAtleta.addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = {
        nome: nome.value,
        sobrenome: sobrenome.value,
        idade: idade.value,
        graduacao: graduacao.value,
        tempo: tempo.value,
        lutou: lutou.value,
        ganhou: ganhou.value,
        perdeu: perdeu.value
      };
      await addDoc(collection(db, "atletas"), data);
      alert("Atleta cadastrado!");
      listarAtletas();
      formAtleta.reset();
    });

    async function listarAtletas() {
      listaAtletas.innerHTML = "";
      const querySnapshot = await getDocs(collection(db, "atletas"));
      querySnapshot.forEach(doc => {
        const a = doc.data();
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `<strong>${a.nome} ${a.sobrenome}</strong><br>
                         Idade: ${a.idade} | Graduação: ${a.graduacao}<br>
                         Treino: ${a.tempo} anos<br>
                         Lutas: ${a.lutou} | Vitórias: ${a.ganhou} | Derrotas: ${a.perdeu}`;
        listaAtletas.appendChild(div);
      });
    }
    listarAtletas();

    // Dieta
    const formDieta = document.getElementById("formDieta");
    const listaDieta = document.getElementById("listaDieta");
    formDieta.addEventListener("submit", async (e) => {
      e.preventDefault();
      const data = {
        refeicao: refeicao.value,
        hora: hora.value
      };
      await addDoc(collection(db, "dietas"), data);
      alert("Refeição adicionada!");
      listarDieta();
      formDieta.reset();
    });

    async function listarDieta() {
      listaDieta.innerHTML = "";
      const querySnapshot = await getDocs(collection(db, "dietas"));
      querySnapshot.forEach(doc => {
        const d = doc.data();
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `<strong>${d.hora}</strong> - ${d.refeicao}`;
        listaDieta.appendChild(div);
      });
    }
    listarDieta();

  </script>
</body>
</html>